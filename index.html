import React, { useState, useEffect, useRef } from 'react';
import { initializeApp } from 'firebase/app';
import { getAuth, signInWithCustomToken, signInAnonymously, onAuthStateChanged } from 'firebase/auth';
import { getFirestore, collection, doc, addDoc, updateDoc, deleteDoc, onSnapshot, query } from 'firebase/firestore';
import { 
  ShieldCheck, Zap, Phone, Mail, Trash2, Clock, CheckCircle, 
  Calculator, Factory, ChevronRight, Cpu, HardHat, Wind, 
  Lightbulb, Truck, Printer, X, Download
} from 'lucide-react';

// Firebase Configuration
const firebaseConfig = JSON.parse(__firebase_config);
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);
const appId = typeof __app_id !== 'undefined' ? __app_id : 'priya-electrical-v2';

// Injection of Tailwind CDN for production environments (GitHub/Vercel)
if (typeof document !== 'undefined') {
  if (!document.getElementById('tailwind-cdn')) {
    const script = document.createElement('script');
    script.id = 'tailwind-cdn';
    script.src = "https://cdn.tailwindcss.com";
    document.head.appendChild(script);
  }
}

export default function App() {
  const [user, setUser] = useState(null);
  const [view, setView] = useState('home');
  const [orders, setOrders] = useState([]);
  const [materials, setMaterials] = useState([]);
  const [isAdmin, setIsAdmin] = useState(false);

  useEffect(() => {
    // Load html2pdf for invoice generation
    const script = document.createElement('script');
    script.src = "https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js";
    script.async = true;
    document.body.appendChild(script);

    const initAuth = async () => {
      try {
        if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
          await signInWithCustomToken(auth, __initial_auth_token);
        } else {
          await signInAnonymously(auth);
        }
      } catch (err) {
        console.error("Auth error:", err);
      }
    };
    initAuth();
    const unsubAuth = onAuthStateChanged(auth, setUser);
    return () => unsubAuth();
  }, []);

  useEffect(() => {
    if (!user) return;
    const qOrders = collection(db, 'artifacts', appId, 'public', 'data', 'orders');
    const qMaterials = collection(db, 'artifacts', appId, 'public', 'data', 'materials');

    const unsubOrders = onSnapshot(qOrders, (snapshot) => {
      setOrders(snapshot.docs.map(d => ({ id: d.id, ...d.data() })));
    }, (err) => console.error("Orders fetch error:", err));
    
    const unsubMaterials = onSnapshot(qMaterials, (snapshot) => {
      setMaterials(snapshot.docs.map(d => ({ id: d.id, ...d.data() })));
    }, (err) => console.error("Materials fetch error:", err));

    return () => { unsubOrders(); unsubMaterials(); };
  }, [user]);

  const handleSubmit = async (data, type) => {
    if (!user) return;
    const col = type === 'material' ? 'materials' : 'orders';
    try {
      await addDoc(collection(db, 'artifacts', appId, 'public', 'data', col), {
        ...data,
        userId: user.uid,
        status: 'pending',
        timestamp: new Date().toISOString()
      });
      setView('track');
    } catch (err) {
      console.error("Submission error:", err);
    }
  };

  const updateStatus = async (id, status, type) => {
    if (!user) return;
    const col = type === 'material' ? 'materials' : 'orders';
    await updateDoc(doc(db, 'artifacts', appId, 'public', 'data', col, id), { status });
  };

  const handleDelete = async (id, type) => {
    if (!user) return;
    const col = type === 'material' ? 'materials' : 'orders';
    await deleteDoc(doc(db, 'artifacts', appId, 'public', 'data', col, id));
  };

  return (
    <div className="min-h-screen bg-slate-50 text-slate-900 font-sans selection:bg-blue-100 selection:text-blue-900">
      <nav className="bg-white/80 backdrop-blur-md border-b border-slate-200 px-6 py-4 flex justify-between items-center sticky top-0 z-[60]">
        <div className="flex items-center gap-2 cursor-pointer" onClick={() => setView('home')}>
          <div className="bg-blue-600 p-1.5 rounded-lg shadow-blue-200 shadow-lg">
            <Zap className="text-white w-5 h-5" />
          </div>
          <h1 className="text-xl font-black tracking-tight text-slate-800">
            Priya<span className="text-blue-600">Electrical</span>
          </h1>
        </div>
        
        <div className="hidden md:flex gap-8 text-sm font-bold text-slate-500">
          <button onClick={() => setView('home')} className={`hover:text-blue-600 transition-colors ${view === 'home' ? 'text-blue-600' : ''}`}>Home</button>
          <button onClick={() => setView('about')} className={`hover:text-blue-600 transition-colors ${view === 'about' ? 'text-blue-600' : ''}`}>About</button>
          <button onClick={() => setView('quote')} className={`hover:text-blue-600 transition-colors ${view === 'quote' ? 'text-blue-600' : ''}`}>Get Quote</button>
          <button onClick={() => setView('material')} className={`hover:text-blue-600 transition-colors ${view === 'material' ? 'text-blue-600' : ''}`}>Materials</button>
          <button onClick={() => setView('track')} className={`hover:text-blue-600 transition-colors ${view === 'track' ? 'text-blue-600' : ''}`}>Track</button>
        </div>

        <button 
          onClick={() => setIsAdmin(!isAdmin)} 
          className="bg-slate-900 text-white px-5 py-2.5 rounded-xl text-xs font-black hover:bg-blue-600 transition-all shadow-xl shadow-slate-200 uppercase tracking-widest"
        >
          {isAdmin ? 'Exit Admin' : 'Admin Area'}
        </button>
      </nav>

      <main className="max-w-7xl mx-auto p-4 md:p-8">
        {isAdmin ? (
          <AdminPanel orders={orders} materials={materials} onUpdate={updateStatus} onDelete={handleDelete} />
        ) : (
          <div className="animate-in fade-in slide-in-from-bottom-2 duration-500">
            {view === 'home' && <Home setView={setView} />}
            {view === 'about' && <About />}
            {view === 'quote' && <RequestForm type="quote" onSubmit={handleSubmit} />}
            {view === 'material' && <RequestForm type="material" onSubmit={handleSubmit} />}
            {view === 'track' && <Tracking orders={orders} materials={materials} />}
          </div>
        )}
      </main>

      <footer className="bg-white border-t border-slate-200 py-12 px-6 mt-20">
        <div className="max-w-7xl mx-auto grid md:grid-cols-3 gap-12">
          <div className="space-y-4">
            <div className="flex items-center gap-2">
              <Zap className="text-blue-600" />
              <span className="font-black text-xl">PriyaElectrical</span>
            </div>
            <p className="text-slate-500 text-sm font-medium leading-relaxed">
              Leading industrial vendor for high-voltage infrastructure and critical electrical raw materials since 2010.
            </p>
          </div>
          <div className="space-y-4">
            <h4 className="font-black text-sm uppercase tracking-widest text-slate-400">Services</h4>
            <ul className="text-slate-600 text-sm font-bold space-y-2">
              <li>High Tension Cabling</li>
              <li>Solar EPC Solutions</li>
              <li>Material Procurement</li>
              <li>Switchgear Installation</li>
            </ul>
          </div>
          <div className="space-y-4">
            <h4 className="font-black text-sm uppercase tracking-widest text-slate-400">Contact</h4>
            <p className="text-slate-600 text-sm font-bold">Raju@#324@gmail.com</p>
            <p className="text-slate-600 text-sm font-bold">+91 8147267247</p>
          </div>
        </div>
      </footer>
    </div>
  );
}

function Home({ setView }) {
  const expertises = [
    { name: "HT/LT Cables", desc: "Specialized industrial power grids.", img: "https://images.unsplash.com/photo-1621905251918-48416bd8575a?auto=format&fit=crop&q=80&w=800", icon: <Zap size={20}/>, link: 'quote' },
    { name: "Solar Systems", desc: "End-to-end solar EPC solutions.", img: "https://images.unsplash.com/photo-1508514177221-188b1cf16e9d?auto=format&fit=crop&q=80&w=800", icon: <Wind size={20}/>, link: 'quote' },
    { name: "Raw Materials", desc: "Bulk supply of copper & insulators.", img: "https://images.unsplash.com/photo-1581092160562-40aa08e78837?auto=format&fit=crop&q=80&w=800", icon: <Factory size={20}/>, link: 'material' },
    { name: "Automation", desc: "PLC systems for modern factories.", img: "https://images.unsplash.com/photo-1518770660439-4636190af475?auto=format&fit=crop&q=80&w=800", icon: <Cpu size={20}/>, link: 'quote' }
  ];

  return (
    <div className="space-y-16">
      <section className="relative h-[600px] rounded-[3rem] overflow-hidden shadow-2xl group">
        <img 
          src="https://images.unsplash.com/photo-1473341304170-971dccb5ac1e?auto=format&fit=crop&q=80&w=1200" 
          className="absolute inset-0 w-full h-full object-cover transition-transform duration-1000 group-hover:scale-105" 
          alt="Banner" 
        />
        <div className="absolute inset-0 bg-gradient-to-tr from-slate-950/90 via-slate-900/50 to-transparent flex flex-col justify-center p-8 md:p-24">
          <div className="max-w-3xl space-y-8">
            <span className="bg-blue-600 text-white px-5 py-2 rounded-xl font-black text-[10px] tracking-[0.2em] uppercase inline-block shadow-xl shadow-blue-500/30">
              Verified Industrial Partner
            </span>
            <h2 className="text-5xl md:text-8xl font-black text-white leading-[0.9] tracking-tighter">
              The Standard in <span className="text-blue-500">Power.</span>
            </h2>
            <p className="text-slate-300 text-xl font-medium max-w-xl leading-relaxed">
              We provide the critical infrastructure components and raw materials that power modern industry.
            </p>
            <div className="flex flex-wrap gap-5 pt-4">
              <button onClick={() => setView('quote')} className="bg-white text-slate-950 px-10 py-5 rounded-2xl font-black text-sm uppercase tracking-widest hover:bg-blue-600 hover:text-white transition-all shadow-2xl flex items-center gap-3">
                Request Quote <ChevronRight size={20}/>
              </button>
              <button onClick={() => setView('about')} className="bg-white/10 backdrop-blur-md text-white border border-white/20 px-10 py-5 rounded-2xl font-black text-sm uppercase tracking-widest hover:bg-white/20 transition-all">
                Company Profile
              </button>
            </div>
          </div>
        </div>
      </section>

      <section className="grid md:grid-cols-4 gap-6">
        {expertises.map((i, idx) => (
          <div key={idx} className="bg-white p-8 rounded-[2rem] shadow-sm border border-slate-100 hover:border-blue-500 transition-all cursor-pointer group" onClick={() => setView(i.link)}>
            <div className="bg-slate-50 w-12 h-12 rounded-xl flex items-center justify-center text-blue-600 mb-6 group-hover:bg-blue-600 group-hover:text-white transition-all">
              {i.icon}
            </div>
            <h3 className="font-black text-slate-800 text-lg mb-2">{i.name}</h3>
            <p className="text-slate-500 text-sm font-medium leading-relaxed">{i.desc}</p>
          </div>
        ))}
      </section>
    </div>
  );
}

function RequestForm({ type, onSubmit }) {
  const [form, setForm] = useState({ name: '', phone: '', company: '', item: 'Standard Quote', details: '' });
  const isMaterial = type === 'material';

  return (
    <div className="max-w-2xl mx-auto bg-white p-8 md:p-12 rounded-[2.5rem] shadow-2xl border border-slate-100">
      <div className="text-center mb-12">
        <h2 className="text-3xl font-black text-slate-900 mb-2">{isMaterial ? 'Material Procurement' : 'Service Quotation'}</h2>
        <p className="text-slate-400 font-bold uppercase text-[10px] tracking-widest">Official Intake Form</p>
      </div>

      <form onSubmit={(e) => { e.preventDefault(); onSubmit(form, type); }} className="space-y-6">
        <div className="grid md:grid-cols-2 gap-6">
          <div className="space-y-2">
            <label className="text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1">Contact Name</label>
            <input required className="w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl focus:ring-4 focus:ring-blue-100 outline-none font-bold" value={form.name} onChange={e => setForm({...form, name: e.target.value})} />
          </div>
          <div className="space-y-2">
            <label className="text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1">Phone Number</label>
            <input required type="tel" className="w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl focus:ring-4 focus:ring-blue-100 outline-none font-bold" value={form.phone} onChange={e => setForm({...form, phone: e.target.value})} />
          </div>
        </div>

        <div className="space-y-2">
          <label className="text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1">Company (Optional)</label>
          <input className="w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl focus:ring-4 focus:ring-blue-100 outline-none font-bold" value={form.company} onChange={e => setForm({...form, company: e.target.value})} />
        </div>

        <div className="space-y-2">
          <label className="text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1">Asset Category</label>
          <select className="w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none font-bold" value={form.item} onChange={e => setForm({...form, item: e.target.value})}>
            <option>Solar Solutions</option>
            <option>HT/LT Cabling</option>
            <option>Industrial Raw Material</option>
            <option>Automation Systems</option>
          </select>
        </div>

        <div className="space-y-2">
          <label className="text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1">Requirements Detail</label>
          <textarea rows="4" className="w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none font-bold" placeholder="Quantity, specific technical rating, or location details..." value={form.details} onChange={e => setForm({...form, details: e.target.value})}></textarea>
        </div>

        <button className="w-full bg-slate-900 text-white py-5 rounded-2xl font-black uppercase text-sm tracking-widest hover:bg-blue-600 transition-all flex items-center justify-center gap-3">
          Submit Request <ChevronRight size={18}/>
        </button>
      </form>
    </div>
  );
}

function Tracking({ orders, materials }) {
  const all = [...orders, ...materials].sort((a,b) => new Date(b.timestamp) - new Date(a.timestamp));

  return (
    <div className="max-w-4xl mx-auto py-10">
      <h2 className="text-3xl font-black text-slate-900 mb-8">Request History</h2>
      {all.length === 0 ? (
        <div className="bg-white border-2 border-dashed border-slate-200 rounded-[2.5rem] p-20 text-center text-slate-400 font-black uppercase text-xs tracking-widest">
          No records found
        </div>
      ) : (
        <div className="space-y-4">
          {all.map((item, idx) => (
            <div key={idx} className="bg-white p-6 rounded-3xl shadow-sm border border-slate-100 flex justify-between items-center group hover:border-blue-500 transition-all">
              <div className="flex items-center gap-4">
                <div className={`w-3 h-3 rounded-full ${item.status === 'pending' ? 'bg-amber-400' : 'bg-green-500 animate-pulse'}`}></div>
                <div>
                  <h4 className="font-black text-slate-800">{item.item || 'Service Request'}</h4>
                  <p className="text-[10px] text-slate-400 font-bold uppercase tracking-widest">{new Date(item.timestamp).toLocaleDateString()}</p>
                </div>
              </div>
              <span className={`px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest ${item.status === 'pending' ? 'bg-slate-100 text-slate-500' : 'bg-green-100 text-green-700'}`}>
                {item.status}
              </span>
            </div>
          ))}
        </div>
      )}
    </div>
  );
}

function About() {
  return (
    <div className="max-w-5xl mx-auto py-10 grid md:grid-cols-2 gap-12">
      <div className="space-y-6">
        <h2 className="text-5xl font-black text-slate-900">Over a decade of <span className="text-blue-600 text-6xl block">Reliability.</span></h2>
        <p className="text-slate-500 font-medium text-lg leading-relaxed">
          PriyaElectrical serves as a critical bridge in the industrial supply chain. We specialize in sourcing, verifying, and deploying high-grade electrical components for major infrastructure projects.
        </p>
        <div className="bg-slate-900 text-white p-8 rounded-[2rem] space-y-4">
          <h4 className="font-black text-blue-500 uppercase text-xs tracking-widest">Contact Office</h4>
          <p className="font-black text-xl">+91 8147267247</p>
          <p className="font-medium text-slate-400">Raju@#324@gmail.com</p>
        </div>
      </div>
      <div className="grid grid-cols-2 gap-6">
        <div className="bg-white p-8 rounded-[2rem] border border-slate-100 shadow-sm text-center">
          <span className="block text-4xl font-black text-blue-600 mb-2">12+</span>
          <span className="text-[10px] font-black uppercase tracking-widest text-slate-400">Years Experience</span>
        </div>
        <div className="bg-white p-8 rounded-[2rem] border border-slate-100 shadow-sm text-center">
          <span className="block text-4xl font-black text-blue-600 mb-2">500+</span>
          <span className="text-[10px] font-black uppercase tracking-widest text-slate-400">Vendor Ties</span>
        </div>
        <div className="col-span-2 bg-blue-50 p-8 rounded-[2rem] border border-blue-100 text-center">
          <ShieldCheck className="mx-auto text-blue-600 mb-4" size={40} />
          <h4 className="font-black text-blue-900 uppercase text-sm tracking-widest">ISO 9001 Certified</h4>
        </div>
      </div>
    </div>
  );
}

function AdminPanel({ orders, materials, onUpdate, onDelete }) {
  const [bill, setBill] = useState({ amount: '', rate: '18', client: '', invNo: 'INV-' + Math.floor(Math.random() * 90000 + 10000) });
  const [showInvoice, setShowInvoice] = useState(false);
  const [isExporting, setIsExporting] = useState(false);
  
  const gstAmt = (parseFloat(bill.amount || 0) * (parseFloat(bill.rate) / 100)).toFixed(2);
  const total = (parseFloat(bill.amount || 0) + parseFloat(gstAmt)).toFixed(2);

  const handleDownload = async () => {
    if (!window.html2pdf) {
      console.warn("PDF library not loaded");
      return;
    }
    setIsExporting(true);
    const element = document.getElementById('printable-bill');
    const opt = {
      margin: 10,
      filename: `${bill.invNo}_Invoice.pdf`,
      image: { type: 'jpeg', quality: 0.98 },
      html2canvas: { scale: 3, useCORS: true },
      jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
    };

    try {
      await window.html2pdf().set(opt).from(element).save();
    } catch (err) {
      console.error("PDF Export failed:", err);
    } finally {
      setIsExporting(false);
    }
  };

  const Table = ({ items, title, type }) => (
    <div className="bg-white rounded-[2rem] shadow-xl border border-slate-200 overflow-hidden mb-10">
      <div className="bg-slate-50 px-8 py-6 border-b border-slate-200 flex justify-between items-center">
        <h3 className="font-black text-slate-800 text-sm uppercase tracking-widest">{title}</h3>
        <span className="bg-slate-900 text-white text-[10px] font-black px-3 py-1 rounded-full">{items.length}</span>
      </div>
      <div className="overflow-x-auto">
        <table className="w-full text-left">
          <thead className="bg-slate-50/50 text-[10px] font-black uppercase tracking-[0.2em] text-slate-400">
            <tr>
              <th className="px-8 py-4">Client</th>
              <th className="px-8 py-4">Request</th>
              <th className="px-8 py-4">Status</th>
              <th className="px-8 py-4 text-right">Actions</th>
            </tr>
          </thead>
          <tbody className="divide-y divide-slate-100">
            {items.map(item => (
              <tr key={item.id} className="hover:bg-slate-50 transition-colors">
                <td className="px-8 py-6">
                  <div className="font-black text-slate-800">{item.name}</div>
                  <div className="text-[10px] text-slate-400 font-bold">{item.phone}</div>
                </td>
                <td className="px-8 py-6 text-sm font-bold text-slate-600">{item.item}</td>
                <td className="px-8 py-6">
                  <span className={`text-[9px] font-black uppercase px-2 py-1 rounded-lg ${item.status === 'pending' ? 'bg-amber-100 text-amber-600' : 'bg-green-100 text-green-600'}`}>
                    {item.status}
                  </span>
                </td>
                <td className="px-8 py-6 text-right">
                  <div className="flex justify-end gap-2">
                    <button onClick={() => onUpdate(item.id, 'approved', type)} className="p-2 bg-green-50 text-green-600 rounded-lg hover:bg-green-600 hover:text-white transition-all"><CheckCircle size={16}/></button>
                    <button onClick={() => onDelete(item.id, type)} className="p-2 bg-red-50 text-red-500 rounded-lg hover:bg-red-500 hover:text-white transition-all"><Trash2 size={16}/></button>
                  </div>
                </td>
              </tr>
            ))}
          </tbody>
        </table>
        {items.length === 0 && <div className="p-12 text-center text-slate-300 font-black uppercase tracking-widest text-[10px]">Empty</div>}
      </div>
    </div>
  );

  return (
    <div className="grid lg:grid-cols-4 gap-8">
      {showInvoice && (
        <div className="fixed inset-0 bg-slate-900/90 backdrop-blur-md z-[100] flex items-center justify-center p-4">
          <div className="bg-white w-full max-w-2xl rounded-[2.5rem] overflow-hidden shadow-2xl">
            <div className="p-12" id="printable-bill">
              <div className="flex justify-between items-start mb-16">
                <div>
                  <h1 className="text-4xl font-black text-slate-900 mb-2">INVOICE</h1>
                  <p className="text-[10px] font-black text-slate-400 uppercase tracking-[0.3em]">{bill.invNo}</p>
                </div>
                <div className="text-right">
                  <div className="flex items-center gap-2 justify-end font-black text-xl mb-1">
                    <Zap className="text-blue-600" fill="currentColor" /> PriyaElectrical
                  </div>
                  <p className="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Industrial Vendor Service</p>
                </div>
              </div>

              <div className="grid grid-cols-2 gap-12 mb-16">
                <div>
                  <label className="text-[9px] font-black text-slate-400 uppercase tracking-widest block mb-2">Client Details</label>
                  <p className="font-black text-lg text-slate-800 uppercase">{bill.client || 'Valued Partner'}</p>
                </div>
                <div className="text-right">
                  <label className="text-[9px] font-black text-slate-400 uppercase tracking-widest block mb-2">Issued Date</label>
                  <p className="font-black text-slate-800">{new Date().toLocaleDateString()}</p>
                </div>
              </div>

              <div className="border-t-2 border-slate-100 py-10">
                <div className="flex justify-between items-center bg-slate-50 p-6 rounded-2xl">
                  <div className="font-black text-slate-800">Industrial Electrical Service & Supply</div>
                  <div className="font-black text-slate-900 text-xl">₹{parseFloat(bill.amount || 0).toLocaleString()}</div>
                </div>
              </div>

              <div className="flex justify-end mt-4">
                <div className="w-64 space-y-3">
                  <div className="flex justify-between font-bold text-slate-400 text-sm"><span>Subtotal</span><span>₹{parseFloat(bill.amount || 0).toLocaleString()}</span></div>
                  <div className="flex justify-between font-bold text-slate-400 text-sm"><span>GST ({bill.rate}%)</span><span>₹{gstAmt}</span></div>
                  <div className="flex justify-between font-black text-3xl text-slate-900 border-t border-slate-200 pt-4 mt-4"><span>Total</span><span>₹{total}</span></div>
                </div>
              </div>
            </div>
            
            <div className="bg-slate-50 p-8 flex gap-4 border-t border-slate-200">
              <button disabled={isExporting} onClick={handleDownload} className="flex-1 bg-blue-600 text-white py-4 rounded-2xl font-black text-xs uppercase tracking-widest hover:bg-blue-700 transition-all flex items-center justify-center gap-3">
                <Download size={18}/> {isExporting ? 'Generating...' : 'Download PDF'}
              </button>
              <button onClick={() => setShowInvoice(false)} className="flex-1 bg-slate-200 text-slate-800 py-4 rounded-2xl font-black text-xs uppercase tracking-widest hover:bg-slate-300 transition-all flex items-center justify-center gap-3">
                <X size={18}/> Close
              </button>
            </div>
          </div>
        </div>
      )}

      <div className="lg:col-span-3">
        <Table items={materials} title="Material Intake" type="material" />
        <Table items={orders} title="Quote Requests" type="quote" />
      </div>

      <div className="lg:col-span-1">
        <div className="bg-slate-900 text-white p-8 rounded-[2.5rem] sticky top-28 shadow-2xl">
          <h3 className="font-black text-xl mb-8 flex items-center gap-3">
            <Calculator className="text-blue-500" /> GST Gen
          </h3>
          <div className="space-y-6">
            <div>
              <label className="text-[10px] font-black text-slate-500 uppercase tracking-widest block mb-2">Customer</label>
              <input className="w-full bg-white/5 border border-white/10 p-4 rounded-2xl text-white font-bold outline-none focus:border-blue-500" value={bill.client} onChange={e => setBill({...bill, client: e.target.value})}/>
            </div>
            <div>
              <label className="text-[10px] font-black text-slate-500 uppercase tracking-widest block mb-2">Amount (₹)</label>
              <input type="number" className="w-full bg-white/5 border border-white/10 p-4 rounded-2xl text-white font-bold outline-none focus:border-blue-500" value={bill.amount} onChange={e => setBill({...bill, amount: e.target.value})}/>
            </div>
            <div>
              <label className="text-[10px] font-black text-slate-500 uppercase tracking-widest block mb-2">GST Rate</label>
              <select className="w-full bg-white/5 border border-white/10 p-4 rounded-2xl text-white font-bold outline-none" value={bill.rate} onChange={e => setBill({...bill, rate: e.target.value})}>
                <option value="5">5% Essential</option>
                <option value="12">12% Parts</option>
                <option value="18">18% Standard</option>
                <option value="28">28% Premium</option>
              </select>
            </div>
            <button onClick={() => setShowInvoice(true)} className="w-full bg-blue-600 py-5 rounded-2xl font-black text-xs uppercase tracking-widest hover:bg-white hover:text-slate-900 transition-all shadow-xl shadow-blue-500/20">
              Generate Invoice
            </button>
          </div>
        </div>
      </div>
    </div>
  );
}
