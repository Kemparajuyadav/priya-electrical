<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Priya Electrical | Industrial Vendor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <style>
        body { font-family: 'Inter', sans-serif; }
        .animate-fade { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body class="bg-[#f8fafc]">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- CONFIGURATION (REPLACE WITH YOUR ACTUAL KEYS) ---
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT.firebaseapp.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT.appspot.com",
            messagingSenderId: "YOUR_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        const DATABASE_ID = 'priya-electrical-v2';

        function App() {
            const [user, setUser] = useState(null);
            const [view, setView] = useState('home');
            const [orders, setOrders] = useState([]);
            const [materials, setMaterials] = useState([]);
            const [isAdmin, setIsAdmin] = useState(false);

            useEffect(() => {
                auth.signInAnonymously().catch(console.error);
                auth.onAuthStateChanged(setUser);
            }, []);

            useEffect(() => {
                if (!user) return;
                const ordersRef = db.collection('artifacts').doc(DATABASE_ID).collection('public').doc('data').collection('orders');
                const materialsRef = db.collection('artifacts').doc(DATABASE_ID).collection('public').doc('data').collection('materials');

                const unsubOrders = ordersRef.onSnapshot(s => setOrders(s.docs.map(d => ({id: d.id, ...d.data()}))));
                const unsubMaterials = materialsRef.onSnapshot(s => setMaterials(s.docs.map(d => ({id: d.id, ...d.data()}))));
                
                return () => { unsubOrders(); unsubMaterials(); };
            }, [user]);

            const handleSubmit = async (data, type) => {
                const colName = type === 'material' ? 'materials' : 'orders';
                await db.collection('artifacts').doc(DATABASE_ID).collection('public').doc('data').collection(colName).add({
                    ...data,
                    userId: user.uid,
                    status: 'pending',
                    timestamp: new Date().toISOString()
                });
                setView('track');
            };

            return (
                <div className="min-h-screen">
                    <nav className="bg-white border-b border-slate-200 px-6 py-4 flex justify-between items-center sticky top-0 z-50">
                        <div className="flex items-center gap-2 cursor-pointer" onClick={() => setView('home')}>
                            <div className="bg-blue-600 p-1 rounded-lg text-white">
                                <i data-lucide="zap" className="w-5 h-5"></i>
                            </div>
                            <h1 className="text-xl font-black text-slate-800">Priya<span className="text-blue-600">Electrical</span></h1>
                        </div>
                        <div className="hidden md:flex gap-6 text-sm font-bold text-slate-500">
                            <button onClick={() => setView('home')} className={view === 'home' ? 'text-blue-600' : ''}>Home</button>
                            <button onClick={() => setView('quote')} className={view === 'quote' ? 'text-blue-600' : ''}>Quote</button>
                            <button onClick={() => setView('material')} className={view === 'material' ? 'text-blue-600' : ''}>Materials</button>
                            <button onClick={() => setView('track')} className={view === 'track' ? 'text-blue-600' : ''}>Track</button>
                        </div>
                        <button onClick={() => setIsAdmin(!isAdmin)} className="bg-slate-900 text-white px-4 py-2 rounded-full text-xs font-bold">
                            {isAdmin ? 'Exit Panel' : 'Admin'}
                        </button>
                    </nav>

                    <main className="max-w-6xl mx-auto p-6 animate-fade">
                        {isAdmin ? (
                            <AdminPanel orders={orders} materials={materials} />
                        ) : (
                            <div>
                                {view === 'home' && <Home setView={setView} />}
                                {view === 'quote' && <RequestForm type="quote" onSubmit={handleSubmit} />}
                                {view === 'material' && <RequestForm type="material" onSubmit={handleSubmit} />}
                                {view === 'track' && <Tracking orders={orders} materials={materials} />}
                            </div>
                        )}
                    </main>
                </div>
            );
        }

        function Home({ setView }) {
            useEffect(() => { lucide.createIcons(); }, []);
            return (
                <div className="text-center py-20 space-y-10">
                    <h2 className="text-6xl font-black text-slate-900 leading-tight">Modern Power <br/><span className="text-blue-600">Infrastructure.</span></h2>
                    <p className="text-slate-500 text-lg max-w-xl mx-auto font-medium">Verified industrial vendor for HT/LT cables, Solar EPC, and bulk raw electrical materials.</p>
                    <div className="flex justify-center gap-4">
                        <button onClick={() => setView('quote')} className="bg-blue-600 text-white px-8 py-4 rounded-2xl font-bold shadow-lg shadow-blue-200">Get Quote</button>
                        <button onClick={() => setView('material')} className="bg-white border border-slate-200 text-slate-700 px-8 py-4 rounded-2xl font-bold">Source Materials</button>
                    </div>
                    <div className="grid md:grid-cols-3 gap-6 pt-10">
                        <div className="bg-white p-6 rounded-3xl border border-slate-100 shadow-sm">
                            <i data-lucide="shield-check" className="text-blue-600 w-8 h-8 mx-auto mb-4"></i>
                            <h3 className="font-bold">Certified Quality</h3>
                        </div>
                        <div className="bg-white p-6 rounded-3xl border border-slate-100 shadow-sm">
                            <i data-lucide="truck" className="text-blue-600 w-8 h-8 mx-auto mb-4"></i>
                            <h3 className="font-bold">Fast Logistics</h3>
                        </div>
                        <div className="bg-white p-6 rounded-3xl border border-slate-100 shadow-sm">
                            <i data-lucide="factory" className="text-blue-600 w-8 h-8 mx-auto mb-4"></i>
                            <h3 className="font-bold">Direct Sourcing</h3>
                        </div>
                    </div>
                </div>
            );
        }

        function RequestForm({ type, onSubmit }) {
            const [form, setForm] = useState({ name: '', phone: '', details: '' });
            return (
                <div className="max-w-xl mx-auto bg-white p-10 rounded-[2.5rem] shadow-xl border border-slate-100">
                    <h2 className="text-3xl font-black mb-6">{type === 'material' ? 'Material Supply' : 'Service Quote'}</h2>
                    <form onSubmit={(e) => { e.preventDefault(); onSubmit(form, type); }} className="space-y-4">
                        <input required className="w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none focus:border-blue-500" placeholder="Contact Name" onChange={e => setForm({...form, name: e.target.value})} />
                        <input required className="w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none focus:border-blue-500" placeholder="Phone Number" onChange={e => setForm({...form, phone: e.target.value})} />
                        <textarea required className="w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none focus:border-blue-500" rows="4" placeholder="Requirements (Quantity, Specs, etc.)" onChange={e => setForm({...form, details: e.target.value})}></textarea>
                        <button className="w-full bg-slate-900 text-white py-5 rounded-2xl font-black uppercase tracking-widest hover:bg-blue-600 transition-all">Submit Request</button>
                    </form>
                </div>
            );
        }

        function Tracking({ orders, materials }) {
            const all = [...orders, ...materials].sort((a,b) => new Date(b.timestamp) - new Date(a.timestamp));
            return (
                <div className="max-w-2xl mx-auto space-y-4">
                    <h2 className="text-2xl font-black mb-6">Request Tracker</h2>
                    {all.length === 0 ? <p className="text-slate-400">No active requests found.</p> : all.map(i => (
                        <div key={i.id} className="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 flex justify-between items-center">
                            <div>
                                <p className="font-black text-slate-800">{i.name}</p>
                                <p className="text-xs text-slate-400 font-bold">{new Date(i.timestamp).toLocaleString()}</p>
                            </div>
                            <span className={`px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest ${i.status === 'pending' ? 'bg-amber-100 text-amber-700' : 'bg-green-100 text-green-700'}`}>
                                {i.status}
                            </span>
                        </div>
                    ))}
                </div>
            );
        }

        function AdminPanel({ orders, materials }) {
            useEffect(() => { lucide.createIcons(); }, []);
            return (
                <div className="grid lg:grid-cols-2 gap-8">
                    <div className="bg-white p-8 rounded-[2.5rem] border border-slate-200 shadow-sm">
                        <h3 className="text-xl font-black mb-6 flex items-center gap-2"><i data-lucide="clock" className="w-5 h-5"></i> Pending Approvals</h3>
                        <div className="space-y-4">
                            {[...orders, ...materials].filter(i => i.status === 'pending').map(i => (
                                <div key={i.id} className="p-4 bg-slate-50 rounded-2xl border border-slate-100 flex justify-between items-center">
                                    <div className="text-sm">
                                        <p className="font-bold">{i.name}</p>
                                        <p className="text-slate-400 text-xs">{i.phone}</p>
                                    </div>
                                    <button onClick={() => db.collection('artifacts').doc(DATABASE_ID).collection('public').doc('data').collection('orders').doc(i.id).update({status: 'approved'})} className="bg-green-600 text-white p-2 rounded-xl">
                                        <i data-lucide="check" className="w-4 h-4"></i>
                                    </button>
                                </div>
                            ))}
                        </div>
                    </div>
                    <div className="bg-slate-900 text-white p-8 rounded-[2.5rem] shadow-2xl">
                        <h3 className="text-xl font-black mb-6 flex items-center gap-2"><i data-lucide="calculator" className="w-5 h-5"></i> Billing Console</h3>
                        <div className="space-y-4">
                            <input className="w-full bg-white/5 border border-white/10 p-4 rounded-2xl outline-none focus:border-blue-500" placeholder="Client Name" />
                            <input className="w-full bg-white/5 border border-white/10 p-4 rounded-2xl outline-none focus:border-blue-500" placeholder="Base Amount" type="number" />
                            <div className="p-6 bg-blue-600 rounded-3xl flex justify-between items-center">
                                <div><p className="text-xs font-bold opacity-80 uppercase">Est. Total (18% GST)</p><p className="text-2xl font-black">â‚¹0.00</p></div>
                                <i data-lucide="download" className="w-6 h-6"></i>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
