<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Priya Electrical — Demo</title>
    <!-- Tailwind via CDN for quick styling when you don't run a build -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Small utilities to mimic a few design touches */
      .rounded-3xl{border-radius:1.5rem}
      .rounded-2xl{border-radius:1rem}
    </style>
  </head>
  <body class="bg-slate-50 text-slate-900 font-sans">
    <nav class="bg-white border-b border-slate-200 px-6 py-4 flex justify-between items-center sticky top-0 z-50">
      <div class="flex items-center gap-2">
        <div class="bg-blue-600 p-2 rounded-lg text-white">⚡</div>
        <h1 class="text-xl font-extrabold">Priya<span class="text-blue-600">Electrical</span></h1>
      </div>
      <div class="hidden md:flex gap-8 text-sm font-semibold text-slate-600">
        <a href="#home" class="hover:text-blue-600">Home</a>
        <a href="#about" class="hover:text-blue-600">About</a>
        <a href="#quote" class="hover:text-blue-600">Get Quote</a>
        <a href="#material" class="hover:text-blue-600">Raw Materials</a>
        <a href="#track" class="hover:text-blue-600">Track</a>
      </div>
      <button class="bg-slate-900 text-white px-4 py-2 rounded-full text-xs font-bold">Admin Login</button>
    </nav>

    <main class="max-w-7xl mx-auto p-8">
      <section id="home" class="relative rounded-3xl overflow-hidden shadow-2xl mb-12">
        <img src="https://images.unsplash.com/photo-1473341304170-971dccb5ac1e?auto=format&fit=crop&q=80&w=1200" class="w-full h-72 object-cover" alt="banner" />
        <div class="p-8 -mt-24 max-w-3xl bg-gradient-to-t from-slate-900/70 to-transparent text-white rounded-2xl">
          <h2 class="text-4xl font-extrabold">Pioneering Modern <span class="text-blue-400">Power</span> Grids</h2>
          <p class="mt-4 text-slate-200">Premium industrial electrical vendor specializing in large-scale infrastructure and raw material procurement.</p>
          <div class="mt-6 flex gap-4">
            <a href="#quote" class="bg-blue-600 text-white px-6 py-3 rounded-2xl">Get A Free Quote</a>
            <a href="#about" class="bg-white/10 text-white px-6 py-3 rounded-2xl">Company Profile</a>
          </div>
        </div>
      </section>

      <section id="about" class="mb-12">
        <h3 class="text-2xl font-bold mb-3">Industrial Expertise</h3>
        <p class="text-slate-600 mb-6">We provide specialized services across the electrical spectrum, from raw material sourcing to smart grid implementation.</p>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <div class="bg-white p-6 rounded-2xl shadow-sm"> <h4 class="font-bold">HT/LT Cables</h4><p class="text-sm text-slate-500">High-tension industrial wiring.</p></div>
          <div class="bg-white p-6 rounded-2xl shadow-sm"> <h4 class="font-bold">Solar Systems</h4><p class="text-sm text-slate-500">End-to-end solar EPC solutions.</p></div>
          <div class="bg-white p-6 rounded-2xl shadow-sm"> <h4 class="font-bold">Raw Materials</h4><p class="text-sm text-slate-500">Bulk supply of copper & insulators.</p></div>
        </div>
      </section>

      <section id="contact" class="grid md:grid-cols-2 gap-8">
        <div class="bg-white p-8 rounded-2xl shadow-xl">
          <h3 class="text-xl font-bold mb-4">Contact</h3>
          <p class="text-slate-600">Phone: 8147267247<br/>Email: Raju@#324@gmail.com</p>
        </div>
        <div class="bg-white p-8 rounded-2xl shadow-xl">
          <h3 class="text-xl font-bold mb-4">Quick Quote</h3>
          <p class="text-slate-600">To receive a quote, visit the deployed app and use the form (when site is built). This static page is a quick styled preview.</p>
        </div>
      </section>
    </main>

    <footer class="text-center py-6 text-sm text-slate-500">© PriyaElectrical</footer>
  </body>
</html>
  const [isExporting, setIsExporting] = useState(false);
  
  const gstAmt = (parseFloat(bill.amount || 0) * (parseFloat(bill.rate) / 100)).toFixed(2);
  const total = (parseFloat(bill.amount || 0) + parseFloat(gstAmt)).toFixed(2);

  const handleDownload = async () => {
    if (!window.html2pdf) {
      alert("PDF library is still loading. Please wait a moment.");
      return;
    }
    setIsExporting(true);
    const element = document.getElementById('printable-bill');
    const opt = {
      margin: 10,
      filename: `Invoice_${bill.invNo}.pdf`,
      image: { type: 'jpeg', quality: 0.98 },
      html2canvas: { scale: 3, useCORS: true },
      jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
    };

    try {
      await window.html2pdf().set(opt).from(element).save();
    } catch (err) {
      console.error("PDF Export failed", err);
    } finally {
      setIsExporting(false);
    }
  };

  const RequestList = ({ items, title, type }) => (
    <div className="bg-white rounded-[2rem] shadow-sm border border-slate-200 overflow-hidden mb-10">
      <div className="bg-slate-50 p-7 flex justify-between items-center border-b border-slate-200">
        <h3 className="font-black text-slate-800 flex items-center gap-3 uppercase tracking-wider text-sm">
          <div className="bg-white p-2 rounded-xl shadow-sm border border-slate-200">
            {type === 'material' ? <Factory size={18}/> : <Zap size={18}/>}
          </div>
          {title}
        </h3>
        <span className="text-[10px] bg-slate-900 text-white px-3 py-1 rounded-full font-black uppercase tracking-widest">{items.length}</span>
      </div>
      <div className="overflow-x-auto">
        <table className="w-full text-left">
          <thead className="bg-slate-50 text-slate-400 text-[10px] uppercase font-black tracking-widest">
            <tr>
              <th className="px-8 py-5">Client Contact</th>
              <th className="px-8 py-5">Request Detail</th>
              <th className="px-8 py-5">Status</th>
              <th className="px-8 py-5 text-right">Actions</th>
            </tr>
          </thead>
          <tbody className="divide-y divide-slate-100">
            {items.map(i => (
              <tr key={i.id} className="hover:bg-slate-50/50 transition-colors">
                <td className="px-8 py-6">
                  <div className="font-black text-slate-800">{i.name}</div>
                  <div className="text-[11px] text-slate-400 font-bold">{i.company || 'N/A'} • {i.phone}</div>
                </td>
                <td className="px-8 py-6">
                  <span className="text-sm font-bold text-slate-600">{i.item || 'N/A'}</span>
                  <div className="text-[10px] text-slate-400 truncate max-w-[200px]">{i.details}</div>
                </td>
                <td className="px-8 py-6">
                  <span className={`text-[9px] font-black uppercase px-2.5 py-1 rounded-lg ${
                    i.status === 'pending' ? 'bg-amber-100 text-amber-600' : 'bg-green-100 text-green-600'
                  }`}>
                    {i.status}
                  </span>
                </td>
                <td className="px-8 py-6 text-right">
                  <div className="flex justify-end gap-2">
                    <button onClick={() => onUpdate(i.id, 'pending', type)} className="p-2.5 bg-slate-100 hover:bg-amber-100 rounded-xl text-slate-500 hover:text-amber-600 transition-all"><Clock size={16}/></button>
                    <button onClick={() => onUpdate(i.id, 'approved', type)} className="p-2.5 bg-slate-100 hover:bg-green-100 rounded-xl text-slate-500 hover:text-green-600 transition-all"><CheckCircle size={16}/></button>
                    <button onClick={() => onDelete(i.id, type)} className="p-2.5 bg-slate-100 hover:bg-red-100 rounded-xl text-slate-500 hover:text-red-500 transition-all"><Trash2 size={16}/></button>
                  </div>
                </td>
              </tr>
            ))}
          </tbody>
        </table>
        {items.length === 0 && <div className="p-20 text-center text-slate-300 font-black uppercase tracking-widest text-xs">No active data</div>}
      </div>
    </div>
  );

  return (
    <div className="grid lg:grid-cols-4 gap-10">
      {showInvoice && (
        <div className="fixed inset-0 z-[100] bg-slate-900/80 backdrop-blur-sm flex items-center justify-center p-4">
          <div className="bg-white w-full max-w-2xl rounded-[2rem] overflow-hidden shadow-2xl animate-in zoom-in duration-300">
            <div className="p-10" id="printable-bill">
              <div className="flex justify-between items-start mb-12">
                <div>
                  <h1 className="text-3xl font-black text-slate-900 mb-1">INVOICE</h1>
                  <p className="text-slate-400 font-bold tracking-widest uppercase text-xs">{bill.invNo}</p>
                </div>
                <div className="text-right">
                  <div className="flex items-center gap-2 justify-end mb-1">
                    <Zap className="text-blue-600 w-5 h-5" fill="currentColor" />
                    <span className="font-black text-xl text-slate-900">PriyaElectrical</span>
                  </div>
                  <p className="text-[10px] text-slate-400 font-bold">Industrial Vendor • 8147267247</p>
                </div>
              </div>

              <div className="grid grid-cols-2 gap-10 mb-12">
                <div>
                  <h4 className="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2">Billed To</h4>
                  <p className="font-black text-slate-800 text-lg uppercase">{bill.client || 'Valued Client'}</p>
                  <p className="text-slate-500 text-xs font-bold">Project Procurement</p>
                </div>
                <div className="text-right">
                  <h4 className="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2">Issue Date</h4>
                  <p className="font-black text-slate-800">{new Date().toLocaleDateString()}</p>
                </div>
              </div>

              <div className="border-t-2 border-slate-100 py-8 space-y-4">
                <div className="flex justify-between font-bold text-slate-400 uppercase text-[10px] tracking-widest px-4">
                  <span>Description</span>
                  <span>Amount</span>
                </div>
                <div className="flex justify-between font-black text-slate-800 bg-slate-50 p-5 rounded-2xl">
                  <span>Industrial Supply Service</span>
                  <span>₹{parseFloat(bill.amount || 0).toLocaleString()}</span>
                </div>
              </div>

              <div className="flex justify-end pt-8">
                <div className="w-64 space-y-3">
                  <div className="flex justify-between text-slate-500 font-bold text-sm">
                    <span>Subtotal</span>
                    <span>₹{parseFloat(bill.amount || 0).toLocaleString()}</span>
                  </div>
                  <div className="flex justify-between text-slate-400 font-bold text-sm italic">
                    <span>GST ({bill.rate}%)</span>
                    <span>₹{gstAmt}</span>
                  </div>
                  <div className="flex justify-between text-slate-900 font-black text-2xl pt-4 border-t border-slate-200">
                    <span>Total</span>
                    <span>₹{total}</span>
                  </div>
                </div>
              </div>
            </div>
            
            <div className="bg-slate-50 p-6 flex gap-4 no-print">
              <button 
                disabled={isExporting}
                onClick={handleDownload} 
                className={`flex-1 ${isExporting ? 'bg-blue-400' : 'bg-blue-600'} text-white py-4 rounded-2xl font-black text-xs uppercase tracking-widest flex items-center justify-center gap-2 transition-all active:scale-95`}
              >
                <Download size={16}/> {isExporting ? 'Generating...' : 'Download & Print'}
              </button>
              <button onClick={() => setShowInvoice(false)} className="flex-1 bg-slate-200 text-slate-800 py-4 rounded-2xl font-black text-xs uppercase tracking-widest flex items-center justify-center gap-2">
                <X size={16}/> Close
              </button>
            </div>
          </div>
        </div>
      )}

      <div className="lg:col-span-3">
        <RequestList items={materials} title="Raw Material Queue" type="material" />
        <RequestList items={orders} title="Quotations Queue" type="quote" />
      </div>
      
      <div className="lg:col-span-1 space-y-8">
        <div className="bg-slate-900 text-white p-10 rounded-[2.5rem] shadow-2xl relative overflow-hidden">
          <div className="absolute -right-4 -top-4 w-32 h-32 bg-blue-600/20 rounded-full blur-3xl"></div>
          <h3 className="font-black text-2xl mb-8 flex items-center gap-3">
            <div className="bg-blue-600 p-2.5 rounded-xl"><Calculator size={22}/></div>
            GST Billing
          </h3>
          
          <div className="space-y-6 relative z-10">
            <div>
              <label className="text-[9px] font-black text-slate-500 uppercase tracking-[0.2em] block mb-2">Client Name</label>
              <input type="text" className="w-full bg-white/5 border border-white/10 p-4 rounded-2xl focus:outline-none focus:border-blue-500 text-white font-bold" 
                placeholder="Client Name" value={bill.client} onChange={e => setBill({...bill, client: e.target.value})}/>
            </div>
            <div>
              <label className="text-[9px] font-black text-slate-500 uppercase tracking-[0.2em] block mb-2">Base Amount (₹)</label>
              <input type="number" className="w-full bg-white/5 border border-white/10 p-4 rounded-2xl focus:outline-none focus:border-blue-500 text-white font-bold" 
                placeholder="0.00" value={bill.amount} onChange={e => setBill({...bill, amount: e.target.value})}/>
            </div>
            <div>
              <label className="text-[9px] font-black text-slate-500 uppercase tracking-[0.2em] block mb-2">GST Rate (%)</label>
              <select className="w-full bg-white/5 border border-white/10 p-4 rounded-2xl focus:outline-none focus:border-blue-500 text-white font-bold appearance-none" 
                value={bill.rate} onChange={e => setBill({...bill, rate: e.target.value})}>
                <option value="5" className="text-slate-900">5% Essentials</option>
                <option value="12" className="text-slate-900">12% Equipment</option>
                <option value="18" className="text-slate-900">18% Standard</option>
                <option value="28" className="text-slate-900">28% Luxury</option>
              </select>
            </div>
            
            <div className="bg-white/5 p-6 rounded-3xl space-y-3 border border-white/5">
              <div className="flex justify-between text-xs text-slate-400 font-bold"><span>Subtotal:</span><span>₹{parseFloat(bill.amount || 0).toLocaleString()}</span></div>
              <div className="flex justify-between text-xs text-blue-400 font-bold uppercase tracking-widest"><span>GST ({bill.rate}%):</span><span>₹{gstAmt}</span></div>
              <div className="flex justify-between font-black text-2xl pt-5 border-t border-white/10 mt-3"><span>Total:</span><span className="text-blue-500">₹{total}</span></div>
            </div>

            <button onClick={() => setShowInvoice(true)} className="w-full bg-blue-600 hover:bg-blue-500 text-white py-5 rounded-2xl font-black text-xs uppercase tracking-widest transition-all shadow-2xl shadow-blue-500/30 flex items-center justify-center gap-3 active:scale-95">
              <Printer size={18}/> Generate Official Invoice
            </button>
          </div>
        </div>
      </div>
    </div>
  );
}

const style = document.createElement('style');
style.innerHTML = `
  @media print {
    body * { visibility: hidden; }
    #printable-bill, #printable-bill * { visibility: visible; }
    #printable-bill { position: absolute; left: 0; top: 0; width: 100%; border: none !important; }
    .no-print { display: none !important; }
  }
`;
document.head.appendChild(style);
